# 컴퓨터 시스템의 하드웨어 구성

[!하드웨어 구성](../images/hardware.png)

## 버스(Bus)

하드웨어는 크게 프로세서, 메모리, 입출력 장치로 구분된다. 이 구성 요소들 사이에 데이터가 오고가는 공간이 버스이다.

버스를 통해 데이터가 오고갈 때, 일반적으로 비트 단위가 아니라 고정된 워드 크기 단위로 데이터가 전달된다. 이 워드 크기는 환경에 따라 다른데, 32비트/64비트 할 때의 그 'N 비트'가 바로 워드 크기이다.

> 어셈블리에서 사용하는 '워드 크기'와 여기서 말하는 '워드 크기'는 다르다. x86-64 ISA는 호환성을 위해 1워드를 16비트로 선언, 32비트를 DWORD / 64비트를 QWORD로 명명했다.

## 입출력 장치(I/O Device)

입출력 장치는 말 그대로 컴퓨터 시스템의 입력과 출력을 담당하는 장치이다. 

입출력 장치는 운영체제에 의해 추상화된다. 유닉스 환경에서는 키보드/마우스 등의 입력 장치, 모니터/스피커 등의 출력 장치, 파일/네트워크 모두 '파일 입출력'으로 추상화되어 하나의 공통된 입출력 방식을 가진다. 

## 메모리

주 기억장치로, 프로그램의 데이터와 명령어를 저장하는 임시 공간이다. 메모리는 연속된 바이트 배열로, 고유한 주소에 접근해 데이터나 명령어를 읽고 쓸 수 있다. 

## 프로세서

인스트럭션을 읽어서 명령을 수행한다. 상태를 나타내는 다양한 레지스터(Register)와 산술 연산장치(ALU), 캐시 메모리로 구성되어 있다. 

컴퓨터의 시작부터 종료까지, 프로세서는 매 주기마다 PC가 가리키고 있는 인스트럭션(=기계어 명령어)을 실행한다. 이 과정에서 주어진 명령을 실행하기 위해 메모리나 레지스터를 읽고 쓰게 된다. 인스트럭션 실행 이후에는 PC를 업데이트하여 다음 인스트럭션을 실행한다. 

프로세서가 하는 대표적인 작업은 다음과 같다
- 적재: 메모리를 읽어 저장된 값을 레지스터에 저장한다
- 저장: 레지스터에 저장된 값을 메모리에 저장한다

- 작업: 산술연산을 수행한 후 결과를 레지스터에 저장한다
- 점프: PC를 다음 인스트럭션이 아닌 특정 위치로 변경한다

# 저장장치의 계층

레지스터 - 캐시 메모리 - 메모리 - 입출력 장치로 갈 수록 저장 단가는 싸지고, 입출력 속도는 느려진다. 

한 저장장치 계층에서 다른 계층으로 옮길 때의 이 속도 차이가 성능 하락의 주 원인이다. 예를 들어 주 메모리를 읽는 시간은 레지스터를 읽는 데 필요한 시간의 100배 이상이다.

이러한 오버헤드를 줄이기 위해, 캐시 메모리를 사용한다. 사용할 가능성이 높은 주변 정보를 한 번에 버스를 통해 전달해 최대한 다른 계층간의 데이터 전달을 줄이려는 시도이다. 
